# 需求澄清与技术咨询

作为该项目的开发人员，在完成本次迭代的功能开发后，我们希望与您进一步沟通以下事项，以确保项目能更好地满足您的需求并保持长期的可维护性。

## 📋 已完成功能确认

### 本次迭代完成的内容：
1. ✅ 修复了深色主题下的 UI 对比度问题
2. ✅ 实现了用户自主选择新闻来源的功能
3. ✅ 实现了关键词搜索功能
4. ✅ 新增了 CSDN 作为中文技术社区数据源
5. ✅ 更新了相关文档

---

## ❓ 关键需求澄清

### 1. 搜索功能的范围与深度

**当前实现**：前端本地搜索，仅搜索当前已加载的新闻数据（标题、描述、作者）

**需要确认**：
- 这种实时本地搜索是否满足需求？
- 是否需要实现更强大的搜索功能，例如：
  - 历史数据的搜索（需要数据库支持）
  - 按时间范围搜索
  - 高级搜索（多条件组合、正则表达式）
  - 搜索结果排序（相关度、时间等）
  - 搜索历史记录
  - 热门搜索词推荐

### 2. 数据源选择的持久化

**当前实现**：用户选择的数据源仅在当前会话有效，刷新页面后恢复默认（全选）

**需要确认**：
- 是否需要持久化用户的数据源选择偏好？
- 如果需要，采用何种方式：
  - LocalStorage（无需后端，但不支持跨设备）
  - 用户账户系统（需要登录注册功能）
  - Cookie（可设置过期时间）

### 3. CSDN 数据源的具体需求

**当前实现**：抓取 CSDN 首页热门文章

**需要确认**：
- CSDN 的抓取范围是否合适？是否需要调整为：
  - 博客排行榜
  - 特定技术领域（前端、后端、AI 等）
  - 推荐文章
  - 某些特定博主的文章
- 抓取频率是否需要与其他源不同？
- 是否需要抓取更多信息（阅读量、点赞数、评论摘要等）？

### 4. 中文数据源的扩展计划

**需要确认**：
- 除了 CSDN，您是否希望添加其他中文技术社区？优先级如何？
  - 掘金（Juejin）
  - 思否（SegmentFault）
  - V2EX
  - 知乎技术话题
  - 开源中国（OSChina）
  - InfoQ 中文站
- 是否需要英文和中文内容的权重调整或分开展示？

---

## 🤔 技术架构与设计疑问

### 5. 数据持久化与扩展性

**当前状态**：所有数据存储在内存中，服务重启后数据丢失

**需要讨论**：
- 随着功能增加（搜索历史、用户偏好、收藏等），是否需要引入数据库？
- 如需引入数据库，您对技术栈有偏好吗？
  - PostgreSQL（关系型，功能强大）
  - MongoDB（文档型，灵活）
  - SQLite（轻量级，适合小规模）
  - Redis（键值存储，适合缓存和会话）

### 6. 用户系统的必要性

**需要确认**：
- 是否计划引入用户系统？如果是，何时开始？
- 用户系统需要支持哪些功能？
  - 登录注册（邮箱、社交账号）
  - 个人资料管理
  - 新闻收藏
  - 阅读历史
  - 个性化推荐
  - 订阅关键词推送

### 7. 性能与可扩展性

**当前限制**：
- 每个数据源抓取前 10 条
- 每 6 小时自动更新一次
- 单服务器部署

**需要确认**：
- 这些限制是否合理？是否需要调整？
- 预期的用户规模是多少？
  - 个人使用
  - 小团队（< 100 人）
  - 中型企业（100-1000 人）
  - 公开服务（> 1000 人）
- 是否需要考虑以下优化：
  - 分布式部署
  - CDN 加速
  - API 限流
  - 缓存策略优化

---

## 🎨 UI/UX 相关问题

### 8. 界面主题与定制化

**当前实现**：仅支持深色主题

**需要确认**：
- 是否需要支持浅色主题或主题切换功能？
- 是否需要支持用户自定义颜色配置？
- 字体大小、行间距等是否需要可调节？

### 9. 搜索与筛选的交互优化

**需要确认**：
- 当前搜索是实时的（输入即搜索），是否需要：
  - 防抖优化（避免频繁过滤）
  - 搜索建议/自动完成
  - 高亮显示匹配的关键词
- 数据源筛选和关键词搜索是"与"关系，是否符合预期？

### 10. 移动端体验

**需要确认**：
- 移动端的使用场景和频率如何？
- 是否需要开发独立的移动应用（App）或 PWA？
- 移动端是否需要特殊的功能或简化的界面？

---

## 🛡️ 安全与合规性问题

### 11. 网络爬虫的合规性

**当前状况**：
- 使用网络爬虫抓取公开数据
- 设置了合理的 User-Agent
- 遵循 robots.txt（部分）

**需要确认**：
- 您是否了解并接受相关的法律风险？
- 是否需要：
  - 添加爬虫延迟以避免对目标网站造成压力
  - 检查并遵守各网站的服务条款
  - 使用官方 API（如果有）替代爬虫
  - 添加免责声明

### 12. 数据版权与归属

**需要确认**：
- 是否需要在前端展示数据来源的版权信息？
- 是否需要添加"原文链接"的跳转提示？
- 对于用户生成内容（如搜索记录、收藏），数据所有权如何界定？

---

## 🚀 部署与运维

### 13. 部署环境

**需要确认**：
- 预期的部署环境是什么？
  - 本地开发环境
  - 云服务器（阿里云、腾讯云、AWS 等）
  - 容器化部署（Docker、K8s）
  - Serverless 架构
- 是否需要支持多环境配置（开发、测试、生产）？

### 14. 监控与日志

**需要确认**：
- 是否需要系统监控和告警？
  - 服务健康检查
  - 数据源抓取失败通知
  - 性能指标监控
- 日志级别和存储策略是什么？

### 15. 备份与容灾

**需要确认**：
- 引入数据库后，是否需要数据备份方案？
- 是否需要容灾恢复计划？
- 期望的 RTO（恢复时间目标）和 RPO（恢复点目标）是多少？

---

## 💡 功能优先级建议

基于当前项目状态，我们建议以下功能的优先级：

### 高优先级（建议近期实施）
1. **搜索关键词高亮**：提升用户体验
2. **用户偏好持久化**：使用 LocalStorage，无需后端改动
3. **搜索防抖优化**：提升性能
4. **更多中文数据源**：满足国内用户需求
5. **错误提示优化**：提升系统健壮性

### 中优先级（建议中期规划）
1. **数据库引入**：支持更复杂的功能
2. **用户系统**：支持个性化功能
3. **新闻收藏功能**：提升用户粘性
4. **移动端 PWA**：提升移动体验
5. **Docker 部署优化**：简化部署流程

### 低优先级（长期规划）
1. **AI 推荐算法**：需要大量数据和算法支持
2. **多语言支持**：取决于用户群体
3. **移动 App**：投入成本较高
4. **数据可视化**：锦上添花的功能

---

## 📊 性能与代码质量

### 16. 测试策略

**当前状态**：无自动化测试

**需要确认**：
- 是否需要添加测试？优先级如何？
  - 单元测试（Jest、Vitest）
  - 集成测试
  - E2E 测试（Playwright、Cypress）
- 测试覆盖率目标是多少？

### 17. 代码规范与质量

**需要确认**：
- 是否需要引入代码规范工具？
  - ESLint
  - Prettier
  - Husky（Git hooks）
- 是否需要代码审查流程？

---

## 🎯 项目设计的潜在问题

作为资深开发人员，我们注意到以下可能需要优化的设计：

### 18. 数据刷新策略

**当前设计**：
- 定时 6 小时刷新
- 手动刷新时重新抓取所有数据源

**潜在问题**：
1. 所有用户共享一份数据，无法个性化
2. 手动刷新会给后端和目标网站带来压力
3. 没有增量更新机制

**建议**：
- 是否需要考虑增量更新？
- 是否需要限制手动刷新的频率（如 5 分钟内只能刷新一次）？
- 是否考虑不同数据源有不同的刷新频率？

### 19. 前端状态管理

**当前设计**：
- 使用 Pinia 管理全局状态
- 过滤逻辑在 App.vue 中的 computed

**潜在优化**：
- 随着功能增加，是否需要将过滤逻辑移到 Store 中？
- 是否需要实现状态持久化插件？

### 20. 错误处理与用户反馈

**当前状态**：
- 基本的 try-catch
- 控制台日志

**建议优化**：
- 是否需要统一的错误提示组件（Toast、Modal）？
- 是否需要错误上报服务（Sentry 等）？
- 当所有数据源都失败时，如何提示用户？

---

## 📞 后续沟通建议

为了更高效地推进项目，我们建议：

1. **需求优先级确认会议**：讨论上述问题，明确下一阶段的开发重点
2. **技术选型评审**：如需引入新技术（数据库、用户系统），进行技术选型评审
3. **定期演示与反馈**：建立定期的 Demo 和反馈机制
4. **文档维护**：随着项目发展，保持文档的同步更新

---

## ✅ 行动项（待您反馈）

请您考虑以上问题，并告知我们：

- [ ] 哪些功能是必须的？
- [ ] 哪些功能可以暂缓？
- [ ] 技术栈的选择偏好
- [ ] 预算和时间约束
- [ ] 其他任何关注点或特殊需求

---

**编写时间**：2024-11-05  
**文档版本**：v1.0  
**联系方式**：[在此添加您的联系方式]

期待您的反馈，让我们一起打造更好的技术新闻聚合平台！🚀
